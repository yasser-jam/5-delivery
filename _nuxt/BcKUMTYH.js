const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bny9Kg5O.js","./C3ukM2nq.js"])))=>i.map(i=>d[i]);
import{_ as te}from"./7wLVCX7z.js";import{m as O,b as q,c as j,d as oe,u as R,a as se,e as ie,f as F,g as ne,h as le}from"./psFYo1SV.js";import{m as U,a as W,u as re,b as ae,V as C,c as de,d as ce}from"./Bzn-_PMu.js";import{p as B,k as Z,g as A,l as I,o as ue,m as me,q as _e,t as ve,v as fe,_ as J,s as K,w as ye,u as he}from"./Bbehs7N6.js";import{t as f,o as n,b as ge,c as L,y as xe,f as w,m as S,N as c,P as y,W as a,O as p,F as V,a6 as G,u as s,Z as i,ab as E,_ as g,$ as h,a0 as pe,a1 as be,L as Ce,a9 as ke}from"./BD5YuzA9.js";import{_ as De}from"./BHATHBKW.js";import{_ as Se}from"./DjjRusWv.js";import{V as H}from"./UKZjBz-p.js";import{u as Ie}from"./BZPjSa_V.js";import{_ as we}from"./Dpl7V2su.js";import{u as Ve}from"./DDvDu1ZI.js";import{u as Te}from"./jHvwcfMW.js";import{d as ze}from"./C3ukM2nq.js";import{V as D,a as $e}from"./BlQ0-Wdf.js";import{V as Pe}from"./Dt3C0eew.js";import"./BnWRgCQ-.js";import"./B8D11CU1.js";import"./BlccBs8X.js";import"./nWwk2dlZ.js";import"./DG18msts.js";import"./B56Kp7nt.js";import"./Bx9xkHiB.js";import"./DWGaNmQL.js";import"./BjbDJdNK.js";import"./B3g41LjN.js";import"./BTyoG65H.js";const Oe=B({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Z,iconColor:String,lineColor:String,...O(),...q(),...U(),...W()},"VTimelineDivider"),Re=A()({name:"VTimelineDivider",props:Oe(),setup(e,d){let{slots:r}=d;const{sizeClasses:l,sizeStyles:m}=re(e,"v-timeline-divider__dot"),{backgroundColorStyles:t,backgroundColorClasses:o}=j(f(e,"dotColor")),{roundedClasses:u}=oe(e,"v-timeline-divider__dot"),{elevationClasses:_}=ae(e),{backgroundColorClasses:k,backgroundColorStyles:b}=j(f(e,"lineColor"));return R(()=>n("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[n("div",{class:["v-timeline-divider__before",k.value],style:b.value},null),!e.hideDot&&n("div",{key:"dot",class:["v-timeline-divider__dot",_.value,u.value,l.value],style:m.value},[n("div",{class:["v-timeline-divider__inner-dot",o.value,u.value],style:t.value},[r.default?n(se,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},r.default):n(C,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),n("div",{class:["v-timeline-divider__after",k.value],style:b.value},null)])),{}}}),Q=B({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Z,iconColor:String,lineInset:[Number,String],...O(),...ie(),...W(),...q(),...U(),...F()},"VTimelineItem"),Y=A()({name:"VTimelineItem",props:Q(),setup(e,d){let{slots:r}=d;const{dimensionStyles:l}=ne(e),m=ge(0),t=L();return xe(t,o=>{var u;o&&(m.value=((u=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:u.getBoundingClientRect().width)??0)},{flush:"post"}),R(()=>{var o,u;return n("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":I(m.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${I(e.lineInset)})`:I(0)},e.style]},[n("div",{class:"v-timeline-item__body",style:l.value},[(o=r.default)==null?void 0:o.call(r)]),n(Re,{ref:t,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:r.icon}),e.density!=="compact"&&n("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((u=r.opposite)==null?void 0:u.call(r))])])}),{}}}),Be=B({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ue(Q({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...O(),...de(),...F(),...me()},"VTimeline"),Ae=A()({name:"VTimeline",props:Be(),setup(e,d){let{slots:r}=d;const{themeClasses:l}=_e(e),{densityClasses:m}=ce(e),{rtlClasses:t}=ve();fe({VTimelineDivider:{lineColor:f(e,"lineColor")},VTimelineItem:{density:f(e,"density"),dotColor:f(e,"dotColor"),fillDot:f(e,"fillDot"),hideOpposite:f(e,"hideOpposite"),iconColor:f(e,"iconColor"),lineColor:f(e,"lineColor"),lineInset:f(e,"lineInset"),size:f(e,"size")}});const o=w(()=>{const _=e.side?e.side:e.density!=="default"?"end":null;return _&&`v-timeline--side-${_}`}),u=w(()=>{const _=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return _;case"start":return _[0];case"end":return _[1];default:return null}});return R(()=>n(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,u.value,{"v-timeline--inset-line":!!e.lineInset},l.value,m.value,o.value,t.value,e.class],style:[{"--v-timeline-line-thickness":I(e.lineThickness)},e.style]},r)),{}}}),Le=S({__name:"Timeline",props:{status:{}},setup(e){const d=e,r=L([{order:1,status:"prepared",title:"Prepared"},{order:2,status:"ready",title:"Ready"},{order:3,status:"assigned",title:"Assign"},{order:4,status:"on-way",title:"On Way"},{order:5,status:"done",title:"Done"}]),l=w(()=>{var m;return((m=r.value.find(t=>t.status==d.status))==null?void 0:m.order)||0});return(m,t)=>(c(),y(Ae,{direction:"horizontal","line-inset":"12","dot-color":"grey"},{default:a(()=>[(c(!0),p(V,null,G(s(r),(o,u)=>(c(),p(V,null,[u%2==0?(c(),y(Y,{key:0,"dot-color":o.order==s(l)?o.status=="done"?"success":"blue":o.order<s(l)?"success":"grey",icon:o.order==s(l)?o.status=="done"?"mdi-check":"":o.order<s(l)?"mdi-check":""},{opposite:a(()=>[i("div",{class:E(o.order==s(l)?o.status=="done"?"text-success":"text-blue":o.order<s(l)?"text-success":"text-grey")},g(o.title),3)]),_:2},1032,["dot-color","icon"])):(c(),y(Y,{key:1,"dot-color":o.order==s(l)?"blue":o.order<s(l)?"success":"grey",icon:o.order==s(l)?"":o.order<s(l)?"mdi-check":""},{default:a(()=>[i("div",{class:E(o.order==s(l)?"text-blue":o.order<s(l)?"text-success":"text-grey")},g(o.title),3)]),_:2},1032,["dot-color","icon"]))],64))),256))]),_:1}))}}),M=e=>(pe("data-v-ab3e76ac"),e=e(),be(),e),Me={class:"flex justify-between items-center py-6 px-6 bg-violet-50 rounded-lg relative border-2 border-dashed border-violet"},Ne={class:"flex flex-col gap-4"},je=M(()=>i("div",{class:"text-violet font-semibold text-2xl"}," Yasser Jamal Al-Deen ",-1)),Ee=M(()=>i("div",{class:"text-gray-400 text-base"}," yasserjamalaldeen@gmail.com ",-1)),Ye={class:"flex items-center gap-2 font-medium text-violet mt-4"},qe=M(()=>i("div",null,"0993544811",-1)),Fe=S({__name:"Card",props:{user:{}},setup(e){return(d,r)=>(c(),p("div",Me,[i("div",Ne,[i("div",null,[je,Ee,i("div",Ye,[n(C,null,{default:a(()=>[h("mdi-phone")]),_:1}),qe])])]),n(C,{class:"bg-icon"},{default:a(()=>[h("mdi-account")]),_:1})]))}}),Ue=J(Fe,[["__scopeId","data-v-ab3e76ac"]]),We={class:"flex items-center justify-between p-4 bg-blue-50 rounded-lg relative border-2 border-dashed border-blue"},Ze={class:"flex flex-col gap-4 grow-1"},Je={class:"text-blue font-semibold text-xl"},Ke={key:0,class:"flex w-[125px] border-2 border-white"},Ge=["src"],He=S({__name:"Card",props:{meal:{}},setup(e){return(d,r)=>{var l;return c(),p("div",We,[i("div",Ze,[i("div",Je,g(d.meal.name)+" x "+g(d.meal.quantity),1),i("div",null,[n(H,{size:"large",color:"blue",class:"uppercase"},{default:a(()=>[h(g(d.meal.size),1)]),_:1})])]),(l=d.meal.photo)!=null&&l.length?(c(),p("div",Ke,[i("img",{src:`https://5delivery.store/DeliveryApp/public/upload/${d.meal.photo}`,class:"w-28 h-20 rounded-lg object-cover",alt:"meal-photo"},null,8,Ge)])):(c(),y(C,{key:1,class:"bg-icon"},{default:a(()=>[h("mdi-food")]),_:1}))])}}}),Qe=J(He,[["__scopeId","data-v-a3e36d41"]]),Xe=window.setInterval,et=i("div",{id:"map",class:"h-[300px] w-full"},null,-1),tt={key:0,class:"flex items-center gap-2 text-gray-500 font-italic mt-2"},ot=i("div",null,"Driver has no assigned address",-1),st=S({__name:"Map",props:{status:{},driver:{},orderAddress:{}},setup(e){const d=le(),r=e,l=Ie(),{driverAddress:m}=K(l);let t=null,o=null,u;const _=L(!0),k=async()=>{const v=await ye(()=>import("./Bny9Kg5O.js").then(ee=>ee.l),__vite__mapDeps([0,1]),import.meta.url),x=[0,0],T=[0,0];t=v.map("map").setView(x,13),v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:100,attribution:"&copy; OpenStreetMap contributors"}).addTo(t);const z={iconUrl:"https://img.icons8.com/?size=100&id=tSc6Ou2iMbdd&format=png&color=000000",iconSize:[50,50]},$={iconUrl:"https://img.icons8.com/?size=100&id=13800&format=png&color=000000",iconSize:[40,40]},P={icon:v.icon($)},X={icon:v.icon(z)};r.status!="Delivered"&&(o=v.marker(x,X).addTo(t)),v.marker(T,P).addTo(t)},b=async()=>{try{await l.getPosition(Number(r.driver.id)),_.value=!0}catch(x){console.log(x),x.status==404&&(_.value=!1,d.showErrorMsg("Driver has no assigned address!"),clearInterval(u))}const v=[m.value.y,m.value.x];o==null||o.setLatLng(v),t==null||t.setView(v,t==null?void 0:t.getZoom())};return Ce(async()=>{k(),await b(),r.status!="Delivered"&&(u=Xe(()=>{b()},1e3*5))}),(v,x)=>(c(),p(V,null,[et,s(_)?ke("",!0):(c(),p("div",tt,[n(C,null,{default:a(()=>[h("mdi-information")]),_:1}),ot]))],64))}}),it={class:"flex justify-between items-center mt-8 mb-2"},nt={class:"text-4xl text-primary font-semibold"},lt={class:"text-amber-300 text-xl"},rt={class:"flex gap-2 items-center text-gray-500 mt-4"},at={class:"flex items-center gap-2"},dt=i("div",null,"/",-1),ct={class:"flex items-center gap-2"},ut=i("div",{class:"text-xl font-medium text-gray-400 mb-2"}," Delivery Worker ",-1),mt=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Customer",-1),_t=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Order Meals",-1),vt={class:"max-h-[300px] overflow-auto"},ft=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Order Address",-1),qt=S({__name:"[order_id]",setup(e){const d=Ve(),l=he().params.order_id,{pending:m}=Te(()=>d.get(Number(l)),"$Ki5dhCRPxt"),{order:t}=K(d),o=w(()=>{if(t.value.delivery_worker){if(t.value.status=="Delivered")return"done";if(t.value.status=="Ready")return"assigned"}else return"ready";return"on-way"});return(u,_)=>{const k=te,b=Le,v=De,x=Se,T=Ue,z=Qe,$=st,N=we;return s(m)?(c(),y(k,{key:0,name:"Order",class:"my-4"})):(c(),y(Pe,{key:1},{default:a(()=>[i("div",it,[i("div",null,[i("div",nt,[h(" Order #"+g(s(t).id)+" ",1),i("span",lt,"("+g(s(t).restaurant_name)+")",1)]),i("div",rt,[i("div",at,[n(C,null,{default:a(()=>[h("mdi-calendar")]),_:1}),i("div",null,g(s(ze)(s(t).order_date).format("DD-MM-YYYY")),1)]),dt,i("div",ct,[n(C,null,{default:a(()=>[h("mdi-cash")]),_:1}),i("div",null,g(s(t).order_price)+"S.P",1)])])]),n(H,{size:"large",color:s(t).status=="ready"?"blue":"green"},{default:a(()=>[h(g(s(t).status),1)]),_:1},8,["color"])]),n($e,null,{default:a(()=>[n(D,{cols:"12",class:"mb-2"},{default:a(()=>[n(b,{status:s(o)},null,8,["status"])]),_:1}),n(D,{cols:"12",md:"6"},{default:a(()=>[ut,s(t).delivery_worker?(c(),y(x,{key:1,"is-active":"",driver:s(t).delivery_worker},null,8,["driver"])):(c(),y(v,{key:0},{default:a(()=>[h(" No Assigned Driver ")]),_:1}))]),_:1}),n(D,{cols:"12",md:"6",class:"mb-4"},{default:a(()=>[mt,n(T,{user:s(t).user},null,8,["user"])]),_:1}),n(D,{cols:"12",md:"4"},{default:a(()=>[_t,i("div",vt,[(c(!0),p(V,null,G(s(t).meals,P=>(c(),y(z,{meal:P,class:"mb-2"},null,8,["meal"]))),256))])]),_:1}),n(D,{cols:"12",md:"8"},{default:a(()=>[ft,!s(t).delivery_worker||s(t).status=="Ready"?(c(),y(v,{key:0},{default:a(()=>[h("This order is not under delivery yet!")]),_:1})):(c(),y(N,{key:1},{default:a(()=>[n($,{status:s(t).status,driver:s(t).delivery_worker,"order-address":s(t).address},null,8,["status","driver","order-address"])]),_:1}))]),_:1})]),_:1})]),_:1}))}}});export{qt as default};
