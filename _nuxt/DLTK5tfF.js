const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bny9Kg5O.js","./C3ukM2nq.js"])))=>i.map(i=>d[i]);
import{_ as ee}from"./DjPKv8Po.js";import{m as O,b as Y,c as N,d as te,u as R,a as oe,e as se,f as q,g as ie,h as ne}from"./B3blWL1e.js";import{m as F,a as U,u as le,b as re,V as C,c as ae,d as de}from"./3WJmsLTF.js";import{p as A,k as W,g as B,l as V,o as ce,m as ue,q as me,t as _e,v as ve,_ as Z,s as K,w as fe,u as ye}from"./C7DhVHKC.js";import{t as y,o as n,b as he,c as L,y as ge,f as w,m as S,N as c,P as h,W as d,O as p,F as I,a6 as G,u as s,Z as i,ab as j,_ as f,$ as g,L as xe,a9 as pe}from"./BD5YuzA9.js";import{_ as be}from"./C0Za5A_A.js";import{_ as Ce}from"./CZlFd-1a.js";import{V as H}from"./BPvM9szM.js";import{u as ke}from"./CjLoYUk2.js";import{_ as De}from"./BHYBCFCS.js";import{u as Se}from"./CG3EF6FT.js";import{u as Ve}from"./CjBeFTg7.js";import{d as we}from"./C3ukM2nq.js";import{V as D,a as Ie}from"./CyTdk8aQ.js";import{V as Te}from"./BpJhpv9W.js";import"./BKiVLb4-.js";import"./DTjwCOnY.js";import"./DDeKxyLY.js";import"./BQwBZdcp.js";import"./DG18msts.js";import"./2u2b6hRe.js";import"./CPOveElg.js";import"./DWGaNmQL.js";import"./Bcch_yve.js";import"./B3g41LjN.js";import"./BNV3nxFm.js";const ze=A({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:W,iconColor:String,lineColor:String,...O(),...Y(),...F(),...U()},"VTimelineDivider"),$e=B()({name:"VTimelineDivider",props:ze(),setup(e,a){let{slots:r}=a;const{sizeClasses:l,sizeStyles:m}=le(e,"v-timeline-divider__dot"),{backgroundColorStyles:t,backgroundColorClasses:o}=N(y(e,"dotColor")),{roundedClasses:u}=te(e,"v-timeline-divider__dot"),{elevationClasses:_}=re(e),{backgroundColorClasses:k,backgroundColorStyles:b}=N(y(e,"lineColor"));return R(()=>n("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[n("div",{class:["v-timeline-divider__before",k.value],style:b.value},null),!e.hideDot&&n("div",{key:"dot",class:["v-timeline-divider__dot",_.value,u.value,l.value],style:m.value},[n("div",{class:["v-timeline-divider__inner-dot",o.value,u.value],style:t.value},[r.default?n(oe,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},r.default):n(C,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),n("div",{class:["v-timeline-divider__after",k.value],style:b.value},null)])),{}}}),J=A({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:W,iconColor:String,lineInset:[Number,String],...O(),...se(),...U(),...Y(),...F(),...q()},"VTimelineItem"),E=B()({name:"VTimelineItem",props:J(),setup(e,a){let{slots:r}=a;const{dimensionStyles:l}=ie(e),m=he(0),t=L();return ge(t,o=>{var u;o&&(m.value=((u=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:u.getBoundingClientRect().width)??0)},{flush:"post"}),R(()=>{var o,u;return n("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":V(m.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${V(e.lineInset)})`:V(0)},e.style]},[n("div",{class:"v-timeline-item__body",style:l.value},[(o=r.default)==null?void 0:o.call(r)]),n($e,{ref:t,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:r.icon}),e.density!=="compact"&&n("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((u=r.opposite)==null?void 0:u.call(r))])])}),{}}}),Pe=A({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ce(J({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...O(),...ae(),...q(),...ue()},"VTimeline"),Oe=B()({name:"VTimeline",props:Pe(),setup(e,a){let{slots:r}=a;const{themeClasses:l}=me(e),{densityClasses:m}=de(e),{rtlClasses:t}=_e();ve({VTimelineDivider:{lineColor:y(e,"lineColor")},VTimelineItem:{density:y(e,"density"),dotColor:y(e,"dotColor"),fillDot:y(e,"fillDot"),hideOpposite:y(e,"hideOpposite"),iconColor:y(e,"iconColor"),lineColor:y(e,"lineColor"),lineInset:y(e,"lineInset"),size:y(e,"size")}});const o=w(()=>{const _=e.side?e.side:e.density!=="default"?"end":null;return _&&`v-timeline--side-${_}`}),u=w(()=>{const _=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return _;case"start":return _[0];case"end":return _[1];default:return null}});return R(()=>n(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,u.value,{"v-timeline--inset-line":!!e.lineInset},l.value,m.value,o.value,t.value,e.class],style:[{"--v-timeline-line-thickness":V(e.lineThickness)},e.style]},r)),{}}}),Re=S({__name:"Timeline",props:{status:{}},setup(e){const a=e,r=L([{order:1,status:"prepared",title:"Prepared"},{order:2,status:"ready",title:"Ready"},{order:3,status:"assigned",title:"Assign"},{order:4,status:"on-way",title:"On Way"},{order:5,status:"done",title:"Done"}]),l=w(()=>{var m;return((m=r.value.find(t=>t.status==a.status))==null?void 0:m.order)||0});return(m,t)=>(c(),h(Oe,{direction:"horizontal","line-inset":"12","dot-color":"grey"},{default:d(()=>[(c(!0),p(I,null,G(s(r),(o,u)=>(c(),p(I,null,[u%2==0?(c(),h(E,{key:0,"dot-color":o.order==s(l)?o.status=="done"?"success":"blue":o.order<s(l)?"success":"grey",icon:o.order==s(l)?o.status=="done"?"mdi-check":"":o.order<s(l)?"mdi-check":""},{opposite:d(()=>[i("div",{class:j(o.order==s(l)?o.status=="done"?"text-success":"text-blue":o.order<s(l)?"text-success":"text-grey")},f(o.title),3)]),_:2},1032,["dot-color","icon"])):(c(),h(E,{key:1,"dot-color":o.order==s(l)?"blue":o.order<s(l)?"success":"grey",icon:o.order==s(l)?"":o.order<s(l)?"mdi-check":""},{default:d(()=>[i("div",{class:j(o.order==s(l)?"text-blue":o.order<s(l)?"text-success":"text-grey")},f(o.title),3)]),_:2},1032,["dot-color","icon"]))],64))),256))]),_:1}))}}),Ae={class:"flex justify-between items-center py-6 px-6 bg-violet-50 rounded-lg relative border-2 border-dashed border-violet"},Be={class:"flex flex-col gap-4"},Le={class:"text-violet font-semibold text-2xl"},Me={class:"text-gray-400 text-base"},Ne={class:"flex items-center gap-2 font-medium text-violet mt-4"},je=S({__name:"Card",props:{user:{}},setup(e){return(a,r)=>(c(),p("div",Ae,[i("div",Be,[i("div",null,[i("div",Le,f(a.user.name),1),i("div",Me,f(a.user.email),1),i("div",Ne,[n(C,null,{default:d(()=>[g("mdi-phone")]),_:1}),i("div",null,f(a.user.phone),1)])])]),n(C,{class:"bg-icon"},{default:d(()=>[g("mdi-account")]),_:1})]))}}),Ee=Z(je,[["__scopeId","data-v-33f2471a"]]),Ye={class:"flex items-center justify-between p-4 bg-blue-50 rounded-lg relative border-2 border-dashed border-blue"},qe={class:"flex flex-col gap-4 grow-1"},Fe={class:"text-blue font-semibold text-xl"},Ue={key:0,class:"flex w-[125px] border-2 border-white"},We=["src"],Ze=S({__name:"Card",props:{meal:{}},setup(e){return(a,r)=>{var l;return c(),p("div",Ye,[i("div",qe,[i("div",Fe,f(a.meal.name)+" x "+f(a.meal.quantity),1),i("div",null,[n(H,{size:"large",color:"blue",class:"uppercase"},{default:d(()=>[g(f(a.meal.size),1)]),_:1})])]),(l=a.meal.photo)!=null&&l.length?(c(),p("div",Ue,[i("img",{src:`https://5delivery.store/DeliveryApp/public/upload/${a.meal.photo}`,class:"w-28 h-20 rounded-lg object-cover",alt:"meal-photo"},null,8,We)])):(c(),h(C,{key:1,class:"bg-icon"},{default:d(()=>[g("mdi-food")]),_:1}))])}}}),Ke=Z(Ze,[["__scopeId","data-v-a3e36d41"]]),Ge=window.setInterval,He=i("div",{id:"map",class:"h-[300px] w-full"},null,-1),Je={key:0,class:"flex items-center gap-2 text-gray-500 font-italic mt-2"},Qe=i("div",null,"Driver has no assigned address",-1),Xe=S({__name:"Map",props:{status:{},driver:{},orderAddress:{}},setup(e){const a=ne(),r=e,l=ke(),{driverAddress:m}=K(l);let t=null,o=null,u;const _=L(!0),k=async()=>{const v=await fe(()=>import("./Bny9Kg5O.js").then(X=>X.l),__vite__mapDeps([0,1]),import.meta.url),x=[0,0],T=[r.orderAddress.x,r.orderAddress.y];t=v.map("map").setView(x,13),v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:100,attribution:"&copy; OpenStreetMap contributors"}).addTo(t);const z={iconUrl:"https://img.icons8.com/?size=100&id=tSc6Ou2iMbdd&format=png&color=000000",iconSize:[50,50]},$={iconUrl:"https://img.icons8.com/?size=100&id=13800&format=png&color=000000",iconSize:[40,40]},P={icon:v.icon($)},Q={icon:v.icon(z)};r.status!="Delivered"&&(o=v.marker(x,Q).addTo(t)),v.marker(T,P).addTo(t)},b=async()=>{try{await l.getPosition(Number(r.driver.id)),_.value=!0}catch(x){console.log(x),x.status==404&&(_.value=!1,a.showErrorMsg("Driver has no assigned address!"),clearInterval(u))}const v=[m.value.x,m.value.y];o==null||o.setLatLng(v),t==null||t.setView(v,t==null?void 0:t.getZoom())};return xe(async()=>{k(),await b(),r.status!="Delivered"&&(u=Ge(()=>{b()},1e3*5))}),(v,x)=>(c(),p(I,null,[He,s(_)?pe("",!0):(c(),p("div",Je,[n(C,null,{default:d(()=>[g("mdi-information")]),_:1}),Qe]))],64))}}),et={class:"flex justify-between items-center mt-8 mb-2"},tt={class:"text-4xl text-primary font-semibold"},ot={class:"text-amber-300 text-xl"},st={class:"flex gap-2 items-center text-gray-500 mt-4"},it={class:"flex items-center gap-2"},nt=i("div",null,"/",-1),lt={class:"flex items-center gap-2"},rt=i("div",{class:"text-xl font-medium text-gray-400 mb-2"}," Delivery Worker ",-1),at=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Customer",-1),dt=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Order Meals",-1),ct={class:"max-h-[300px] overflow-auto"},ut=i("div",{class:"text-xl font-medium text-gray-400 mb-2"},"Order Address",-1),Nt=S({__name:"[order_id]",setup(e){const a=Se(),l=ye().params.order_id,{pending:m}=Ve(()=>a.get(Number(l)),"$Ki5dhCRPxt"),{order:t}=K(a),o=w(()=>{if(t.value.delivery_worker){if(t.value.status=="Delivered")return"done";if(t.value.status=="Ready")return"assigned"}else return"ready";return"on-way"});return(u,_)=>{const k=ee,b=Re,v=be,x=Ce,T=Ee,z=Ke,$=Xe,M=De;return s(m)?(c(),h(k,{key:0,name:"Order",class:"my-4"})):(c(),h(Te,{key:1},{default:d(()=>[i("div",et,[i("div",null,[i("div",tt,[g(" Order #"+f(s(t).id)+" ",1),i("span",ot,"("+f(s(t).restaurant_name)+")",1)]),i("div",st,[i("div",it,[n(C,null,{default:d(()=>[g("mdi-calendar")]),_:1}),i("div",null,f(s(we)(s(t).order_date).format("DD-MM-YYYY")),1)]),nt,i("div",lt,[n(C,null,{default:d(()=>[g("mdi-cash")]),_:1}),i("div",null,f(s(t).order_price)+"S.P",1)])])]),n(H,{size:"large",color:s(t).status=="ready"?"blue":"green"},{default:d(()=>[g(f(s(t).status),1)]),_:1},8,["color"])]),n(Ie,null,{default:d(()=>[n(D,{cols:"12",class:"mb-2"},{default:d(()=>[n(b,{status:s(o)},null,8,["status"])]),_:1}),n(D,{cols:"12",md:"6"},{default:d(()=>[rt,s(t).delivery_worker?(c(),h(x,{key:1,"is-active":"",driver:s(t).delivery_worker},null,8,["driver"])):(c(),h(v,{key:0},{default:d(()=>[g(" No Assigned Driver ")]),_:1}))]),_:1}),n(D,{cols:"12",md:"6",class:"mb-4"},{default:d(()=>[at,n(T,{user:s(t).user},null,8,["user"])]),_:1}),n(D,{cols:"12",md:"4"},{default:d(()=>[dt,i("div",ct,[(c(!0),p(I,null,G(s(t).meals,P=>(c(),h(z,{meal:P,class:"mb-2"},null,8,["meal"]))),256))])]),_:1}),n(D,{cols:"12",md:"8"},{default:d(()=>[ut,!s(t).delivery_worker||s(t).status=="Ready"?(c(),h(v,{key:0},{default:d(()=>[g("This order is not under delivery yet!")]),_:1})):(c(),h(M,{key:1},{default:d(()=>[n($,{status:s(t).status,driver:s(t).delivery_worker,"order-address":s(t).address},null,8,["status","driver","order-address"])]),_:1}))]),_:1})]),_:1})]),_:1}))}}});export{Nt as default};
